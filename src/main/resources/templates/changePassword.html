<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change Your Password</title>
    <th:block th:replace="~{/fragments/header.html :: header}"/>
</head>
<body>
  <th:block th:replace="~{/fragments/navbar.html :: navbar}"/>
  <div class="container">
    <form th:action="@{/user/api/v1/changePassword}" th:method="POST">
      <div class="card" style="width: 18rem;">
        <div class="card-body">
          <h5 class="card-title">Change Your Password</h5>
          <span th:text="${param.code}"></span>
          <span th:text="${param.email}"></span>
          <div class="card-text">
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" placeholder="Password" name="password" id="password"/>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password Confirmation</label>
              <input type="password" class="form-control" placeholder="Password Confirmation" name="passwordConf" id="passwordConf"/>
            </div>
            <input type="hidden">
          </div>
          <a href="/login" class="btn btn-secondary">Cancel</a>
          <button type="submit" id="submit" class="btn btn-primary">Register</button>
        </div>
      </div>
    </form>
  </div>
  <script>
    const submit = document.getElementById('submit')
    const password = document.getElementById('password')
    const form = document.forms[0]
    const checkPasswordEquality = () => form.elements.namedItem('password').value === form.elements.namedItem('passwordConf').value

    submit.onclick = e => {
      e.preventDefault();
      if(checkPasswordEquality()){
        form.requestSubmit()
      }else{
        alert("Passwords don't match. Please fix and try again.")
      }
    }
  </script>
  <th:block th:replace="~{/fragments/footer.html :: footer}"/>
</body>
</html>